<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>timer</title>
</head>
<body>
  <div class="selectMinutes">
    <span>勉強時間：</span>
    <select id="study" class="studyMinutes"></select>
    <span>分</span>
    <span>休憩時間：</span>
    <select id="rest" class="restMinutes"></select>
    <span>分</span>
    <div class="button">
      <button class="dicision">決定</button>
    </div>
  </div>
  <div class="timer">
    <div class="studyTimer">
      <span class="minutes">25</span>
      <span>:</span>
      <span class="seconds">00</span>
    </div>
    <div class="restTimer">
      <span class="minutes">5</span>
      <span>:</span>
      <span class="seconds">00</span>
    </div>
  </div>
</body>
<style>
  .timer{
  }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
  $(function(){

    var millenium,
        count = 0;

    function time(value){
      for (var i = 0; i <= 60; i++){
        var option = `<option value="${i}">${i}</option>`;
        if(i === 25){
          if(value === "study"){
            option = `<option value="${i}" selected>${i}</option>`;
          }
        }
        if(i === 5){
          if(value === "rest"){
            option = `<option value="${i}" selected>${i}</option>`;
          }
        }
        $("#"+`${value}`).append(option);
      }
    }

    time("study");
    time("rest");

  function setLastMinutes(max){
    millenium = new Date();
    millenium.setMinutes(millenium.getMinutes() + max);
    console.log(((millenium - (new Date()))/1000)%60);
  }

  // setLastMinutes(Number($("#study").val()));

  function display() {
    var today = new Date();

    if(!millenium){
      setLastMinutes(Number($("#study").val()));
    }

    if(millenium < today){
      count++;
      if(count % 2 !== 0){
        setLastMinutes(Number($("#rest").val()));
      } else {
        setLastMinutes(Number($("#study").val()));
      }
    }

    var milliSec = (millenium - today);
    var minutes = Math.floor(milliSec / (60*1000));
    var seconds = Math.floor((milliSec / 1000) % 60);

    $(".studyTimer").find(".minutes").text(minutes);
    $(".studyTimer").find(".seconds").text(seconds);

  }

  });
</script>
</html>